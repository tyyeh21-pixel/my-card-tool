<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ·å¡å¿«æœ</title>
    <style>
        :root {
            --primary: #007AFF;
            --bg: #f2f2f7;
            --card-bg: #ffffff;
            --text: #1c1c1e;
            --sub-text: #8e8e93;
            --warning: #ff3b30;
            --success: #34c759;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { font-size: 1.4rem; margin-bottom: 20px; color: var(--text); font-weight: 800; }

        /* æœå°‹å€å¡Šæ¨£å¼ */
        .search-container {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
            position: relative;
        }

        input[type="search"] {
            width: 100%;
            padding: 16px;
            font-size: 18px;
            border-radius: 12px;
            border: none;
            background-color: var(--card-bg);
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            box-sizing: border-box; /* ç¢ºä¿ padding ä¸æœƒæ’çˆ†å¯¬åº¦ */
        }
        
        input[type="search"]:focus {
            outline: 2px solid var(--primary);
        }

        .hint-text {
            font-size: 0.85rem;
            color: var(--sub-text);
            margin-top: 8px;
            text-align: center;
        }

        /* çµæœå¡ç‰‡æ¨£å¼ */
        #result-area {
            width: 100%;
            max-width: 400px;
        }

        .result-title {
            margin: 20px 0 10px 5px;
            font-size: 0.9rem;
            color: var(--sub-text);
            font-weight: 600;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border-left: 5px solid transparent;
            animation: fadeIn 0.3s ease-in-out;
        }

        /* ç¬¬ä¸€åçš„å¡ç‰‡ç‰¹åˆ¥é¡¯çœ¼ */
        .card.best-match {
            border-left: 5px solid var(--primary);
            background: #fff;
            box-shadow: 0 8px 20px rgba(0,122,255,0.15);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .card-name { font-size: 1.2rem; font-weight: bold; }
        .rate { font-size: 1.4rem; font-weight: 900; color: var(--primary); }
        .method {
            display: inline-block;
            background-color: #f0f2f5;
            color: #333;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .best-match .method {
            background-color: #e5f1ff;
            color: var(--primary);
        }

        .note { font-size: 0.85rem; color: var(--sub-text); line-height: 1.4; }
        .limit { color: var(--warning); font-weight: 500; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <h1>è¦å»å“ªè£¡æ¶ˆè²»ï¼Ÿ</h1>

    <div class="search-container">
        <input type="search" id="search-input" list="merchant-list" placeholder="è¼¸å…¥é—œéµå­— (å¦‚: 7-11, ç¶²è³¼...)">
        
        <datalist id="merchant-list">
            <option value="7-11 / å…¨å®¶">
            <option value="éº¥ç•¶å‹">
            <option value="æ˜Ÿå·´å…‹">
            <option value="è¦çš® / Momo">
            <option value="å…¨è¯">
            <option value="åŠ æ²¹">
            <option value="æ—¥æœ¬æµ·å¤–">
            <option value="ä¸€èˆ¬æ¶ˆè²» (ç„¡è…¦åˆ·)">
        </datalist>
        <div class="hint-text">ğŸ’¡ æ”¯æ´æ¨¡ç³Šæœå°‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ‰“ã€ŒLine Payã€æ‰¾å¡</div>
    </div>

    <div id="result-area">
        </div>

    <script>
        // -----------------------------------------------------------
        // 1. æ ¸å¿ƒè³‡æ–™åº«ï¼šé€™è£¡å®šç¾©ã€Œä»€éº¼é—œéµå­—ã€å°æ‡‰ã€Œå“ªå¼µå¡ã€
        // -----------------------------------------------------------
        const rules = [
            // --- ç‰¹å®šé€šè·¯å„ªå…ˆ ---
            {
                keywords: ["7-11", "seven", "å…¨å®¶", "è¶…å•†", "ä¾¿åˆ©å•†åº—"],
                cardName: "å°æ–° GoGo (Richard)",
                method: "Line Pay / å°æ–°Pay",
                rate: "3.8%",
                note: "æ¯æœˆä¸Šé™ $1000 (åˆ·3è¬å°é ‚)ã€‚"
            },
            {
                keywords: ["7-11", "å…¨å®¶", "è¶…å•†"],
                cardName: "åŒ¯è±æ—…äºº",
                method: "è¡—å£æ”¯ä»˜",
                rate: "18å…ƒ/å“©",
                note: "ç´¯ç©å“©ç¨‹ç”¨ï¼Œç„¡ä¸Šé™ã€‚"
            },
            {
                keywords: ["å…¨è¯", "pxmart"],
                cardName: "åœ‹æ³° Cube",
                method: "å…¨æ”¯ä»˜ / PX Pay",
                rate: "3%",
                note: "è¨˜å¾—åˆ‡æ›ã€é›†ç²¾é¸ã€‘æ¬Šç›Šã€‚"
            },
            {
                keywords: ["è¦çš®", "momo", "pchome", "ç¶²è³¼", "æ·˜å¯¶"],
                cardName: "å°æ–° GoGo",
                method: "Line Pay (è‹¥æœ‰) / ç›´æ¥åˆ·",
                rate: "3.8%",
                note: "æ¯æœˆä¸Šé™ $1000ã€‚"
            },
            {
                keywords: ["è¦çš®", "momo", "ç¶²è³¼"],
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                method: "å¯¦é«”å¡è¼¸å…¥",
                rate: "18å…ƒ/å“©",
                note: "å¦‚æœ GoGo çˆ†äº†å°±åˆ·é€™å¼µã€‚"
            },
            
            // --- è¡Œå‹•æ”¯ä»˜é€šç”¨è¦å‰‡ ---
            {
                keywords: ["line pay", "linepay", "lp", "è³´é…"],
                cardName: "å°æ–° GoGo",
                method: "ç¶å®š Line Pay",
                rate: "3.8%",
                note: "è¡Œå‹•æ”¯ä»˜ç¥å¡ã€‚"
            },
            {
                keywords: ["è¡—å£", "jkopay"],
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                method: "ç¶å®šè¡—å£",
                rate: "18å…ƒ/å“©",
                note: "æ°´é›»ç“¦æ–¯/è¶…å•†éƒ½å¯ç”¨ã€‚"
            },

            // --- æµ·å¤–èˆ‡æ—…éŠ ---
            {
                keywords: ["æ—¥æœ¬", "éŸ“åœ‹", "æµ·å¤–", "åœ‹å¤–", "é£›æ©Ÿ", "agoda"],
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                method: "å¯¦é«”å¡",
                rate: "10å…ƒ/å“©",
                note: "æµ·å¤–å›é¥‹æœ€å¼·ã€‚"
            },
            {
                keywords: ["æ—¥æœ¬", "éŸ“åœ‹", "æµ·å¤–"],
                cardName: "åœ‹æ³° Cube",
                method: "å¯¦é«”å¡",
                rate: "3%",
                note: "åˆ‡æ›ã€è¶£æ—…è¡Œã€‘ã€‚"
            },

            // --- å…œåº•ç¥å¡ (å¦‚æœéƒ½æ²’å°æ‡‰åˆ°ï¼Œæœƒé¡¯ç¤ºé€™äº›) ---
            {
                keywords: ["general", "default"], // é€™æ˜¯ç³»çµ±ä¿ç•™å­—
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                method: "å¯¦é«”å¡",
                rate: "18å…ƒ/å“©",
                note: "ä¸€èˆ¬æ¶ˆè²»ç„¡è…¦åˆ·ï¼Œç´¯ç©å“©ç¨‹ã€‚"
            },
            {
                keywords: ["general", "default"],
                cardName: "æ°¸è±å¤§æˆ¶",
                method: "å¯¦é«”å¡ / Apple Pay",
                rate: "2%",
                note: "ç¾é‡‘å›é¥‹ï¼Œéœ€å¤§æˆ¶ç­‰ç´šã€‚"
            },
            {
                keywords: ["general", "default"],
                cardName: "åœ‹æ³° Cube",
                method: "å¯¦é«”å¡",
                rate: "0.3%~3%",
                note: "è‹¥ä¸åœ¨å››å¤§æ¬Šç›Šå…§åƒ… 0.3%ï¼Œè«‹å°å¿ƒä½¿ç”¨ã€‚"
            }
        ];

        // -----------------------------------------------------------
        // 2. æœå°‹èˆ‡é…å°é‚è¼¯
        // -----------------------------------------------------------
        const input = document.getElementById('search-input');
        const resultArea = document.getElementById('result-area');

        // é é¢è¼‰å…¥æ™‚ï¼Œå…ˆé¡¯ç¤ºã€Œä¸€èˆ¬æ¶ˆè²»ã€å»ºè­°
        window.onload = () => findBestCard("");

        input.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            findBestCard(query);
        });

        function findBestCard(query) {
            resultArea.innerHTML = "";
            let matches = [];
            let isGeneral = false;

            if (!query) {
                // å¦‚æœæ²’è¼¸å…¥ï¼Œé¡¯ç¤ºé è¨­é€šç”¨å¡
                matches = rules.filter(r => r.keywords.includes("default"));
                resultArea.innerHTML += `<div class="result-title">ğŸŒŸ ä¸€èˆ¬æ¶ˆè²» / ç„¡è…¦åˆ·æ¨è–¦</div>`;
                isGeneral = true;
            } else {
                // æœå°‹é‚è¼¯ï¼šæª¢æŸ¥é—œéµå­—é™£åˆ—æ˜¯å¦åŒ…å«è¼¸å…¥çš„å­—
                matches = rules.filter(rule => {
                    return rule.keywords.some(k => query.includes(k) || k.includes(query));
                });

                // å¦‚æœå®Œå…¨æ‰¾ä¸åˆ°ï¼Œå°±é¡¯ç¤ºé€šç”¨å¡
                if (matches.length === 0) {
                    matches = rules.filter(r => r.keywords.includes("default"));
                    resultArea.innerHTML += `<div class="result-title">ğŸ¤” æ‰¾ä¸åˆ°ç‰¹å®šé€šè·¯ï¼Œå»ºè­°ä½¿ç”¨ä¸€èˆ¬æ¶ˆè²»å¡ï¼š</div>`;
                    isGeneral = true;
                } else {
                    resultArea.innerHTML += `<div class="result-title">ğŸ” "${input.value}" çš„æœ€ä½³è§£ï¼š</div>`;
                }
            }

            // æ¸²æŸ“å¡ç‰‡
            matches.forEach((card, index) => {
                // å¦‚æœæ˜¯æœå°‹çµæœçš„ç¬¬ä¸€å¼µï¼Œçµ¦å®ƒç‰¹æ®Šæ¨£å¼ (best-match)
                const isBest = (!isGeneral && index === 0) ? 'best-match' : '';
                
                const html = `
                    <div class="card ${isBest}">
                        <div class="card-header">
                            <div class="card-name">${card.cardName}</div>
                            <div class="rate">${card.rate}</div>
                        </div>
                        <div class="method">${card.method}</div>
                        <div class="note">
                            ${card.note}
                        </div>
                    </div>
                `;
                resultArea.innerHTML += html;
            });
        }
    </script>
</body>
</html>
