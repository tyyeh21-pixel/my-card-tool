<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åˆ·å¡æ”»ç•¥ 4.0 (ç›®éŒ„ç‰ˆ)</title>
    <style>
        :root {
            --primary: #007AFF;
            --bg: #f5f5f7;
            --card-bg: #ffffff;
            --text: #1d1d1f;
            --sub-text: #86868b;
            --warning: #ff3b30;
            --highlight: #5856d6;
            --taishin: #e60012;
            --tag-bg: #f2f2f7;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { font-size: 1.4rem; margin-bottom: 20px; font-weight: 800; }

        .search-container {
            width: 100%;
            max-width: 450px;
            margin-bottom: 20px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }

        input[type="search"] {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            border-radius: 14px;
            border: 1px solid rgba(0,0,0,0.1);
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
            box-sizing: border-box;
        }
        
        input[type="search"]:focus { outline: 2px solid var(--primary); }

        #result-area {
            width: 100%;
            max-width: 450px;
            padding-bottom: 50px;
        }

        /* åˆ†é¡æ¨™é¡Œæ¨£å¼ */
        .group-header {
            margin: 30px 0 15px 0;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text);
            border-bottom: 2px solid #e5e5ea;
            padding-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .result-title {
            margin: 10px 0;
            font-size: 0.9rem;
            color: var(--sub-text);
        }

        .card {
            background: var(--card-bg);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.03);
            position: relative;
            overflow: hidden;
        }
        
        .card.best-match {
            border: 2px solid var(--primary);
            background: #fff;
            box-shadow: 0 8px 25px rgba(0,122,255,0.12);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .card-name { font-size: 1.1rem; font-weight: 800; color: #000; }
        .rate { font-size: 1.5rem; font-weight: 900; color: var(--primary); }

        .tags-row { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 0.85rem; font-weight: 600; }
        .badge-scheme.cube { background-color: #f3f2ff; color: var(--highlight); border: 1px solid #dcdaff; }
        .badge-scheme.taishin { background-color: #fff2f2; color: var(--taishin); border: 1px solid #ffcccc; }
        .badge-method { background-color: var(--tag-bg); color: #333; }

        .details { background-color: #f9f9f9; padding: 10px; border-radius: 10px; font-size: 0.85rem; }
        .detail-row { margin-bottom: 4px; display: flex; align-items: flex-start; }
        .icon { margin-right: 6px; min-width: 16px; }
        .limit-text { color: var(--warning); }
        .period-text { color: var(--sub-text); font-size: 0.8rem; }
        
        /* é—œéµå­—é¡¯ç¤ºå€ (æ–¹ä¾¿æª¢æŸ¥) */
        .keywords-preview {
            font-size: 0.75rem;
            color: #999;
            margin-top: 8px;
            border-top: 1px dashed #eee;
            padding-top: 5px;
        }

    </style>
</head>
<body>

    <h1>åˆ·å¡è³‡æ–™åº« 4.0</h1>

    <div class="search-container">
        <input type="search" id="search-input" placeholder="è¼¸å…¥é—œéµå­—æœå°‹ï¼Œæˆ–å‘ä¸‹æ»‘å‹•ç€è¦½å…¨ç›®éŒ„">
    </div>

    <div id="result-area">
        </div>

    <script>
        // -----------------------------------------------------------
        // è³‡æ–™åº«è¨­å®š (æ–°å¢ group æ¬„ä½ä»¥ä¾¿åˆ†é¡é¡¯ç¤º)
        // -----------------------------------------------------------
        const rules = [
            // --- ç‰¹æ®Šæ´»å‹• ---
            {
                group: "ğŸ”¥ é™æ™‚æ´»å‹• / å£½æ˜Ÿ",
                keywords: ["å¤§æ¸¯é–‹å”±", "ç˜‹å¤§æ¸¯", "æ‹“å…ƒ", "klook", "é«˜é›„ä½å®¿"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€ç˜‹å¤§æ¸¯ã€‘", schemeType: "cube",
                method: "å®˜ç¶²/ç¾å ´åˆ·å¡", rate: "3.5%~10%", sortVal: 10.0,
                limit: "å”®ç¥¨/ä½å®¿/é«˜éµ3.5%ï¼Œç¾å ´å‘¨é‚Š10%",
                period: "2025/12/16 ~ 2026/3/23"
            },
            {
                group: "ğŸ”¥ é™æ™‚æ´»å‹• / å£½æ˜Ÿ",
                keywords: ["æ…¶ç”Ÿæœˆ", "å£½æ˜Ÿ", "æ«»æ¡ƒè°·", "å¯Œç¾æµ·é®®", "éŒ¢æ«ƒ", "å¥½æ¨‚è¿ª", "å±‹è³€çˆº"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€æ…¶ç”Ÿæœˆã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡", rate: "10%", sortVal: 9.5,
                limit: "å£½æ˜Ÿå°ˆå±¬ (å®œèŠ±æ±/KTV/æŒ‡å®šé¤é…’)",
                period: "2026/1/1 ~ 2026/3/31"
            },
            {
                group: "ğŸ”¥ é™æ™‚æ´»å‹• / å£½æ˜Ÿ",
                keywords: ["ç«¥æ¨‚åŒ¯", "è¦ªå­", "10mois", "tiger family", "æœ±å®—æ…¶"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€ç«¥æ¨‚åŒ¯ã€‘", schemeType: "cube",
                method: "å®˜ç¶²/å¯¦é«”", rate: "5%~10%", sortVal: 9.0,
                limit: "éœ€ç¬¦åˆè¦ªå­å¸³æˆ¶è³‡æ ¼",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- äº¤é€šé€šå‹¤ ---
            {
                group: "ğŸš„ äº¤é€š / é€šå‹¤ / è¨ˆç¨‹è»Š",
                keywords: ["é«˜éµ", "å°éµ", "uber", "yoxi", "linego", "è¨ˆç¨‹è»Š"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¤©å¤©åˆ·ã€‘", schemeType: "taishin",
                method: "åˆ·å¡ / ç¶å¡", rate: "3.3%", sortVal: 3.3,
                limit: "é€šå‹¤æ—é¦–é¸",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸš„ äº¤é€š / é€šå‹¤ / è¨ˆç¨‹è»Š",
                keywords: ["é«˜éµ", "uber", "yoxi", "è¨ˆç¨‹è»Š"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€è¶£æ—…è¡Œã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡ / å®˜ç¶²", rate: "3%", sortVal: 3.0,
                limit: "æ³¨æ„ï¼šé«˜éµå±¬æ–¼è¶£æ—…è¡Œ (éé›†ç²¾é¸)",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- åŠ æ²¹åœè»Š ---
            {
                group: "â›½ åŠ æ²¹ / å……é›» / åœè»Š",
                keywords: ["ä¸­æ²¹", "åŠ æ²¹", "å……é›»", "åœè»Š", "å…¨åœ‹åŠ æ²¹"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¤©å¤©åˆ·ã€‘", schemeType: "taishin",
                method: "åˆ·å¡ / ç¶å¡", rate: "3.3%", sortVal: 3.3,
                limit: "ä¸­æ²¹ç›´ç‡Ÿ/å…¨åœ‹åŠ æ²¹",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "â›½ åŠ æ²¹ / å……é›» / åœè»Š",
                keywords: ["ä¸­æ²¹", "å……é›»", "åœè»Š"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€é›†ç²¾é¸ã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡", rate: "2%", sortVal: 2.0,
                limit: "ä¸­æ²¹é™ç›´ç‡Ÿ",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- é‡è²©è¶…å¸‚ ---
            {
                group: "ğŸ›’ é‡è²© / è¶…å¸‚ / å±…å®¶",
                keywords: ["å®¶æ¨‚ç¦", "lopia", "å¤§è²·å®¶", "å”å‰è»»å¾·", "donki"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¤©å¤©åˆ·ã€‘", schemeType: "taishin",
                method: "å°æ–°Pay / å¯¦é«”å¡", rate: "3.3%", sortVal: 3.3,
                limit: "é‡è²©è¶…å¸‚é¦–é¸",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ›’ é‡è²© / è¶…å¸‚ / å±…å®¶",
                keywords: ["å®¶æ¨‚ç¦", "lopia", "å…¨è¯", "ikea", "å®œå®¶"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€é›†ç²¾é¸ã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡ / PX Pay", rate: "2%", sortVal: 2.0,
                limit: "å…¨è¯éœ€ç¶ PX Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ›’ é‡è²© / è¶…å¸‚ / å±…å®¶",
                keywords: ["ikea", "å®œå®¶", "ç‰¹åŠ›å±‹", "hola", "å®œå¾—åˆ©"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¤§ç­†åˆ·ã€‘", schemeType: "taishin",
                method: "å¯¦é«”å¡", rate: "3.3%", sortVal: 3.3,
                limit: "å±…å®¶è£ä¿®é¡",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- éº¥ç•¶å‹é€Ÿé£Ÿ ---
            {
                group: "ğŸ” éº¥ç•¶å‹ / é€Ÿé£Ÿ / å°é¡",
                keywords: ["éº¥ç•¶å‹", "é€Ÿé£Ÿ"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€Payè‘—åˆ·ã€‘", schemeType: "taishin",
                method: "ç¶å®š å°ç£Pay", rate: "3.8%", sortVal: 3.8,
                limit: "éœ€ç”¨å°ç£Pay (ä¸èƒ½ç”¨Line Pay)",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ” éº¥ç•¶å‹ / é€Ÿé£Ÿ / å°é¡",
                keywords: ["éº¥ç•¶å‹", "é€Ÿé£Ÿ"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€æ¨‚é¥—è³¼ã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡ / Apple Pay", rate: "3%", sortVal: 3.0,
                limit: "å°é¡æ”¯ä»˜æœ‰å›é¥‹",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ” éº¥ç•¶å‹ / é€Ÿé£Ÿ / å°é¡",
                keywords: ["éº¥ç•¶å‹", "é€Ÿé£Ÿ", "å°é¡", "æ‚ éŠå¡"],
                cardName: "æ°¸è±å¤§æˆ¶ (æ‚ éŠå¡)",
                scheme: null, schemeType: null,
                method: "æ‚ éŠå¡æ„Ÿæ‡‰", rate: "3%", sortVal: 2.9,
                limit: "ä¸Šé™ $100/æœˆ",
                period: "é•·æœŸæœ‰æ•ˆ"
            },

            // --- è¶…å•† ---
            {
                group: "ğŸª è¶…å•† (7-11/å…¨å®¶)",
                keywords: ["7-11", "å…¨å®¶", "è¶…å•†"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€Payè‘—åˆ·ã€‘", schemeType: "taishin",
                method: "ç¶å®š å°æ–°Pay", rate: "3.8%", sortVal: 3.8,
                limit: "ç”¨å°æ–°Pay (Line Payåƒ…2.3%)",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸª è¶…å•† (7-11/å…¨å®¶)",
                keywords: ["7-11", "å…¨å®¶", "è¶…å•†"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€é›†ç²¾é¸ã€‘", schemeType: "cube",
                method: "OPENéŒ¢åŒ… / FamiPay", rate: "2%", sortVal: 2.0,
                limit: "éœ€ç¶å®šéŒ¢åŒ…ï¼Œå¯¦é«”å¡ç„¡å›é¥‹",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- ç™¾è²¨è³¼ç‰© ---
            {
                group: "ğŸ›ï¸ ç™¾è²¨ / å¿«æ™‚å°š / è³¼ç‰©",
                keywords: ["æ–°å…‰ä¸‰è¶Š", "sogo", "é æ±", "101", "å·¨åŸ", "æ¼¢ç¥", "èª å“", "uniqlo", "zara", "net"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¤§ç­†åˆ·ã€‘", schemeType: "taishin",
                method: "å°æ–°Pay / å¯¦é«”å¡", rate: "3.3%", sortVal: 3.3,
                limit: "å« skm pay / å¿«æ™‚å°š",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ›ï¸ ç™¾è²¨ / å¿«æ™‚å°š / è³¼ç‰©",
                keywords: ["æ–°å…‰ä¸‰è¶Š", "sogo", "é æ±", "101", "å·¨åŸ", "æ¼¢ç¥", "èª å“", "outlet"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€æ¨‚é¥—è³¼ã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡", rate: "3%", sortVal: 3.0,
                limit: "æ³¨æ„ï¼šUNIQLO/ZARA å±¬åº—ä¸­æ«ƒä¸å›é¥‹",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- é¤é£² ---
            {
                group: "ğŸ½ï¸ é¤å»³ / å¤–é€",
                keywords: ["é¤å»³", "åƒé£¯", "ç‹å“", "æ˜Ÿå·´å…‹", "å¤–é€", "uber eats", "foodpanda"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€å¥½é¥—åˆ·ã€‘", schemeType: "taishin",
                method: "å¯¦é«”å¡ / å°æ–°Pay", rate: "3.3%", sortVal: 3.3,
                limit: "å…¨å°é¤é£² / å¤–é€é›™é›„",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ½ï¸ é¤å»³ / å¤–é€",
                keywords: ["å¤–é€", "uber eats", "foodpanda"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€æ¨‚é¥—è³¼ã€‘", schemeType: "cube",
                method: "ç¶å®š App", rate: "3%", sortVal: 3.0,
                limit: "åƒ…é™å¤–é€å¹³å°",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- ç¶²è³¼é›»å•† ---
            {
                group: "ğŸ“± ç¶²è³¼ / éŠæˆ² / å½±éŸ³",
                keywords: ["è¦çš®", "momo", "pchome", "æ·˜å¯¶", "é…·æ¾", "éŠæˆ²", "netflix", "steam"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€æ•¸è¶£åˆ·ã€‘", schemeType: "taishin",
                method: "åˆ·å¡ / ç¶å¡", rate: "3.3%", sortVal: 3.3,
                limit: "ç¶²è³¼/éŠæˆ²/å½±éŸ³",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "ğŸ“± ç¶²è³¼ / éŠæˆ² / å½±éŸ³",
                keywords: ["è¦çš®", "momo", "pchome", "æ·˜å¯¶", "é…·æ¾"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€ç©æ•¸ä½ã€‘", schemeType: "cube",
                method: "ç›´æ¥åˆ·å¡", rate: "3%", sortVal: 3.0,
                limit: "PChome ä¸å«å„²å€¼",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- æµ·å¤–æ—…éŠ ---
            {
                group: "âœˆï¸ æµ·å¤– / æ©Ÿç¥¨ / è¨‚æˆ¿",
                keywords: ["æ—¥æœ¬", "éŸ“åœ‹", "æµ·å¤–", "agoda", "klook", "æ©Ÿç¥¨"],
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                scheme: null, schemeType: null,
                method: "å¯¦é«”å¡", rate: "10å…ƒ/å“©", sortVal: 4.5,
                limit: "æµ·å¤–é¦–é¸ï¼Œå›é¥‹ç„¡ä¸Šé™",
                period: "é•·æœŸæœ‰æ•ˆ"
            },
            {
                group: "âœˆï¸ æµ·å¤– / æ©Ÿç¥¨ / è¨‚æˆ¿",
                keywords: ["æ—¥æœ¬", "éŸ“åœ‹", "æµ·å¤–", "agoda", "klook", "æ©Ÿç¥¨"],
                cardName: "å°æ–° Richart å¡",
                scheme: "åˆ‡æ›ã€ç©æ—…åˆ·ã€‘", schemeType: "taishin",
                method: "å¯¦é«”å¡", rate: "3.3%", sortVal: 3.3,
                limit: "æµ·å¤–/è¨‚æˆ¿/æ©Ÿç¥¨",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "âœˆï¸ æµ·å¤– / æ©Ÿç¥¨ / è¨‚æˆ¿",
                keywords: ["æ—¥æœ¬", "éŸ“åœ‹", "æµ·å¤–", "agoda", "klook"],
                cardName: "åœ‹æ³° CUBE å¡",
                scheme: "åˆ‡æ›ã€è¶£æ—…è¡Œã€‘", schemeType: "cube",
                method: "å¯¦é«”å¡", rate: "3%", sortVal: 3.0,
                limit: "æ—¥éŸ“æ³°æ–°ç­‰æŒ‡å®šåœ‹å®¶",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- å…œåº• ---
            {
                group: "ğŸŒŸ ä¸€èˆ¬æ¶ˆè²» (ç„¡è…¦åˆ·)",
                keywords: ["default", "ä¸€èˆ¬"],
                cardName: "åŒ¯è±æ—…äººç„¡é™",
                scheme: null, schemeType: null,
                method: "å¯¦é«”å¡", rate: "18å…ƒ/å“©", sortVal: 2.5,
                limit: "åœ‹å…§ä¸€èˆ¬æ¶ˆè²»",
                period: "é•·æœŸæœ‰æ•ˆ"
            },
            {
                group: "ğŸŒŸ ä¸€èˆ¬æ¶ˆè²» (ç„¡è…¦åˆ·)",
                keywords: ["default", "ä¸€èˆ¬"],
                cardName: "æ°¸è±å¤§æˆ¶",
                scheme: null, schemeType: null,
                method: "å¯¦é«”å¡", rate: "2%", sortVal: 2.0,
                limit: "ç¾é‡‘å›é¥‹ (å¤§æˆ¶ç­‰ç´š)",
                period: "é•·æœŸæœ‰æ•ˆ"
            }
        ];

        // -----------------------------------------------------------
        // ç¨‹å¼é‚è¼¯å€
        // -----------------------------------------------------------
        const input = document.getElementById('search-input');
        const resultArea = document.getElementById('result-area');

        // åˆå§‹åŒ–ï¼šç›´æ¥é¡¯ç¤ºæ‰€æœ‰ç›®éŒ„
        window.onload = () => renderAllGroups();

        input.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            if (!query) {
                renderAllGroups(); // æ²’å­—çš„æ™‚å€™ï¼Œé¡¯ç¤ºç›®éŒ„
            } else {
                findBestCard(query); // æœ‰å­—çš„æ™‚å€™ï¼ŒåŸ·è¡Œæœå°‹
            }
        });

        // æ¨¡å¼ 1ï¼šé¡¯ç¤ºæ‰€æœ‰ç›®éŒ„ (Directory Mode)
        function renderAllGroups() {
            resultArea.innerHTML = "";
            
            // å–å¾—æ‰€æœ‰ä¸é‡è¤‡çš„ group åç¨±
            const groups = [...new Set(rules.map(r => r.group))];

            groups.forEach(groupName => {
                // å»ºç«‹åˆ†é¡æ¨™é¡Œ
                const header = document.createElement('div');
                header.className = 'group-header';
                header.innerHTML = `<span>${groupName}</span>`;
                resultArea.appendChild(header);

                // æ‰¾å‡ºè©²åˆ†é¡ä¸‹çš„æ‰€æœ‰å¡ç‰‡
                const groupRules = rules.filter(r => r.group === groupName);
                
                // ä¾ç…§ sortVal æ’åº
                groupRules.sort((a, b) => b.sortVal - a.sortVal);

                groupRules.forEach(card => {
                    resultArea.innerHTML += createCardHtml(card);
                });
            });
        }

        // æ¨¡å¼ 2ï¼šæœå°‹æ¨¡å¼ (Search Mode)
        function findBestCard(query) {
            resultArea.innerHTML = "";
            let matches = [];

            // æœå°‹é‚è¼¯
            matches = rules.filter(rule => {
                return rule.keywords.some(k => query.includes(k) || k.includes(query));
            });

            if (matches.length === 0) {
                resultArea.innerHTML = `<div class="result-title">ğŸ¤” è³‡æ–™åº«æ‰¾ä¸åˆ°ï¼Œå»ºè­°ä½¿ç”¨ä¸€èˆ¬æ¶ˆè²»å¡ï¼š</div>`;
                // æ‰¾ä¸åˆ°æ™‚é¡¯ç¤º default å¡
                const defaults = rules.filter(r => r.keywords.includes("default"));
                defaults.forEach(card => resultArea.innerHTML += createCardHtml(card));
            } else {
                resultArea.innerHTML = `<div class="result-title">ğŸ” "${input.value}" æœå°‹çµæœï¼š</div>`;
                matches.sort((a, b) => b.sortVal - a.sortVal);
                matches.forEach((card, index) => {
                    // æœå°‹æ¨¡å¼ä¸‹ï¼Œç¬¬ä¸€å¼µå¡çµ¦äºˆå¼·èª¿æ¨£å¼
                    const isBest = (index === 0);
                    resultArea.innerHTML += createCardHtml(card, isBest);
                });
            }
        }

        // ç”¢ç”Ÿå¡ç‰‡ HTML çš„å…±ç”¨å‡½å¼
        function createCardHtml(card, highlight = false) {
            let schemeHtml = '';
            if (card.scheme) {
                const badgeClass = card.schemeType === 'cube' ? 'badge-scheme cube' : 'badge-scheme taishin';
                schemeHtml = `<span class="badge ${badgeClass}">${card.scheme}</span>`;
            }

            const extraClass = highlight ? 'best-match' : '';
            // é¡¯ç¤ºé—œéµå­—ä»¥ä¾¿æª¢æŸ¥
            const keywordsText = card.keywords.join(", ");

            return `
                <div class="card ${extraClass}">
                    <div class="card-header">
                        <div class="card-name">${card.cardName}</div>
                        <div class="rate">${card.rate}</div>
                    </div>
                    
                    <div class="tags-row">
                        ${schemeHtml}
                        <span class="badge badge-method">ğŸ’³ ${card.method}</span>
                    </div>

                    <div class="details">
                        <div class="detail-row">
                            <span class="icon">âš ï¸</span>
                            <span class="limit-text">${card.limit}</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">ğŸ“…</span>
                            <span class="period-text">é©ç”¨ï¼š${card.period}</span>
                        </div>
                        <div class="keywords-preview">é—œéµå­—: ${keywordsText}</div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
