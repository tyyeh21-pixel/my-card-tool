<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âà∑Âç°ÊîªÁï• 7.0 (Êô∫ÊÖßÊéíÂ∫è)</title>
    <style>
        :root {
            --primary: #007AFF;
            --bg: #f5f5f7;
            --card-bg: #ffffff;
            --text: #1d1d1f;
            --sub-text: #86868b;
            --warning: #ff3b30;
            --highlight: #5856d6;
            --taishin: #e60012;
            --tag-bg: #f2f2f7;
            --pay-bg: #e8f5e9;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 { font-size: 1.4rem; margin-bottom: 20px; font-weight: 800; }

        .search-container {
            width: 100%;
            max-width: 450px;
            margin-bottom: 20px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }

        input[type="search"] {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            border-radius: 14px;
            border: 1px solid rgba(0,0,0,0.1);
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
            box-sizing: border-box;
        }
        
        input[type="search"]:focus { outline: 2px solid var(--primary); }

        #result-area {
            width: 100%;
            max-width: 450px;
            padding-bottom: 50px;
        }

        .group-header {
            margin: 30px 0 15px 0;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text);
            border-bottom: 2px solid #e5e5ea;
            padding-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .result-title {
            margin: 10px 0;
            font-size: 0.9rem;
            color: var(--sub-text);
            text-align: center;
        }

        .card {
            background: var(--card-bg);
            border-radius: 18px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border: 1px solid rgba(0,0,0,0.03);
            position: relative;
            overflow: hidden;
        }
        
        .card.best-match {
            border: 2px solid var(--primary);
            background: #fff;
            box-shadow: 0 8px 25px rgba(0,122,255,0.12);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            margin-bottom: 8px;
        }

        .card-name { font-size: 1.1rem; font-weight: 800; color: #000; }
        .rate { font-size: 1.5rem; font-weight: 900; color: var(--primary); }

        .tags-row { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
        .badge { padding: 4px 8px; border-radius: 6px; font-size: 0.85rem; font-weight: 600; }
        .badge-scheme.cube { background-color: #f3f2ff; color: var(--highlight); border: 1px solid #dcdaff; }
        .badge-scheme.taishin { background-color: #fff2f2; color: var(--taishin); border: 1px solid #ffcccc; }
        .badge-method { background-color: var(--tag-bg); color: #333; }
        .badge-pay { background-color: var(--pay-bg); color: #2e7d32; border: 1px solid #c8e6c9; }

        .details { background-color: #f9f9f9; padding: 10px; border-radius: 10px; font-size: 0.85rem; }
        .detail-row { margin-bottom: 4px; display: flex; align-items: flex-start; }
        .icon { margin-right: 6px; min-width: 16px; }
        .limit-text { color: var(--warning); }
        .period-text { color: var(--sub-text); font-size: 0.8rem; }
        
        .keywords-preview {
            font-size: 0.75rem;
            color: #ccc;
            margin-top: 8px;
            border-top: 1px dashed #eee;
            padding-top: 5px;
        }

    </style>
</head>
<body>

    <h1>Âà∑Âç°ÊîªÁï• 7.0</h1>

    <div class="search-container">
        <input type="search" id="search-input" list="merchant-list" placeholder="Ëº∏ÂÖ•ÈóúÈçµÂ≠ó (Â¶Ç: Netflix, 7-11...)">
        
        <datalist id="merchant-list">
            <option value="Netflix / YouTube">
            <option value="Â±àËá£Ê∞è / Â∫∑ÊòØÁæé">
            <option value="È∫•Áï∂Âãû">
            <option value="È´òÈêµ / Âè∞Èêµ">
            <option value="ÁîüÊ¥ªÁπ≥Ë≤ª">
            <option value="ÂÆ∂Ê®ÇÁ¶è / Lopia">
            <option value="Êñ∞ÂÖâ‰∏âË∂ä">
            <option value="Êó•Êú¨Êµ∑Â§ñ">
            <option value="7-11 / ÂÖ®ÂÆ∂">
        </datalist>
    </div>

    <div id="result-area">
        </div>

    <script>
        // -----------------------------------------------------------
        // Ë≥áÊñôÂ∫´Ë®≠ÂÆö 7.0
        // -----------------------------------------------------------
        const rules = [
            
            // --- 1. Ëó•Â¶ù / Ëó•Â±Ä ---
            {
                group: "üíä Ëó•Â¶ù / Ëó•Â±Ä",
                keywords: ["Â∫∑ÊòØÁæé", "cosmed"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay", rate: "3.8%", sortVal: 3.8,
                limit: "Â∫∑ÊòØÁæéË´ãÂÑ™ÂÖàÁî®Âè∞Êñ∞Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üíä Ëó•Â¶ù / Ëó•Â±Ä",
                keywords: ["Â±àËá£Ê∞è", "watsons", "Â§ßÊ®πËó•Â±Ä", "‰∏Å‰∏Å", "Êùè‰∏Ä", "Â∫∑ÊòØÁæé"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂ§©Â§©Âà∑„Äë", schemeType: "taishin",
                method: "ÂØ¶È´îÂç° / Apple Pay", rate: "3.3%", sortVal: 3.3,
                limit: "Ëó•Â¶ùÈÄöÁî® (Â±àËá£Ê∞è/Êùè‰∏Ä/Â§ßÊ®π)",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üíä Ëó•Â¶ù / Ëó•Â±Ä",
                keywords: ["Â±àËá£Ê∞è", "watsons", "Â∫∑ÊòØÁæé"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÊ®ÇÈ•óË≥º„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç°", rate: "3%", sortVal: 3.0,
                limit: "ÊåáÂÆöËó•Â¶ù (Â±à/Â∫∑)",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 2. ÁîüÊ¥ªÁπ≥Ë≤ª / Êç∑ÈÅãÂÖ¨Ëªä ---
            {
                group: "üßæ ÁîüÊ¥ªÁπ≥Ë≤ª / Êç∑ÈÅãÂÖ¨Ëªä",
                keywords: ["Êç∑ÈÅã", "ÂÖ¨Ëªä", "Áπ≥Ë≤ª", "Ê∞¥Èõª", "Áì¶ÊñØ"],
                cardName: "Ê∞∏Ë±êÂ§ßÊà∂ (ÊÇ†ÈÅäÂç°)",
                scheme: null, schemeType: null,
                method: "Ëá™ÂãïÂä†ÂÄº / Âó∂Âç°", rate: "3%", sortVal: 3.0,
                limit: "Â§ßÊà∂Á≠âÁ¥ö‰∫´Ëá™ÂãïÂä†ÂÄºÂõûÈ•ã (‰∏äÈôê$100/Êúà)",
                period: "Èï∑ÊúüÊúâÊïà"
            },
            {
                group: "üßæ ÁîüÊ¥ªÁπ≥Ë≤ª / Êç∑ÈÅãÂÖ¨Ëªä",
                keywords: ["Ê∞¥Èõª", "Áì¶ÊñØ", "Áπ≥Ë≤ª", "ÁîüÊ¥ªÁπ≥Ë≤ª", "Â≠∏ÈõúË≤ª"],
                cardName: "ÊÇ†ÈÅä‰ªò (ÈõªÂ≠êÊîØ‰ªò)",
                scheme: null, schemeType: null,
                method: "ÊÇ†ÈÅä‰ªò App", rate: "2%", sortVal: 2.0,
                limit: "ÁîüÊ¥ªÁπ≥Ë≤ªÂ∞àÁî®",
                period: "Èï∑ÊúüÊúâÊïà"
            },
            {
                group: "üßæ ÁîüÊ¥ªÁπ≥Ë≤ª / Êç∑ÈÅãÂÖ¨Ëªä",
                keywords: ["Êç∑ÈÅã", "ÂÖ¨Ëªä", "Âè∞ÂåóÊç∑ÈÅã", "Êñ∞ÂåóÊç∑ÈÅã", "‰∫§ÈÄö"],
                cardName: "ÊÇ†ÈÅäÂç° (ÂØ¶È´îÂç°)",
                scheme: null, schemeType: null,
                method: "Áõ¥Êé•Âó∂Âç°", rate: "ÊúÄÂàíÁÆó", sortVal: 1.5,
                limit: "Â§ßÁúæÈÅãËº∏È¶ñÈÅ∏",
                period: "Èï∑ÊúüÊúâÊïà"
            },

            // --- 3. Ë°åÂãïÊîØ‰ªò / Ë∑ØÈÇäÊî§ ---
            {
                group: "üì± Ë°åÂãïÊîØ‰ªò / Ë∑ØÈÇäÊî§ / ÊéÉÁ¢º",
                keywords: ["Ë∑ØÈÇäÊî§", "Â∞èÂêÉ", "Â§úÂ∏Ç", "Âè∞ÁÅ£pay", "taishin pay", "Âè∞Êñ∞pay", "ÊéÉÁ¢º", "Á•ûËÖ¶", "Áá¶Âù§", "ÂÖ®ÂúãÈõªÂ≠ê"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay / Âè∞ÁÅ£Pay", rate: "3.8%", sortVal: 3.8,
                limit: "ÊéÉÁ¢ºÈ¶ñÈÅ∏ (Âê´Âè∞Êñ∞Pay/Âè∞ÁÅ£PayÁâπÂ∫ó)",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üì± Ë°åÂãïÊîØ‰ªò / Ë∑ØÈÇäÊî§ / ÊéÉÁ¢º",
                keywords: ["line pay", "linepay", "Ë∑ØÈÇäÊî§", "Â∞èÂêÉ"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂÅáÊó•Âà∑/ÂÖ∂‰ªñ„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Line Pay", rate: "2.3%", sortVal: 2.3,
                limit: "Line Pay ÂÉÖ 2.3%ÔºåÂÑ™ÂÖàÁî®Âè∞ÁÅ£Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 4. Ë∂ÖÂïÜ ---
            {
                group: "üè™ Ë∂ÖÂïÜ (7-11/ÂÖ®ÂÆ∂)",
                keywords: ["7-11", "ÂÖ®ÂÆ∂", "Ë∂ÖÂïÜ"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay", rate: "3.8%", sortVal: 3.8,
                limit: "Âè∞Êñ∞Ë¶ÅÁ∂Å App ÊâçÊúâÂõûÈ•ã",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üè™ Ë∂ÖÂïÜ (7-11/ÂÖ®ÂÆ∂)",
                keywords: ["7-11", "ÂÖ®ÂÆ∂", "Ë∂ÖÂïÜ"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÈõÜÁ≤æÈÅ∏„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç° / Èå¢ÂåÖ", rate: "2%", sortVal: 2.0,
                limit: "CUBE ÂèØÁõ¥Êé•Âà∑ÂØ¶È´îÂç°",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 5. È∫•Áï∂ÂãûÈÄüÈ£ü ---
            {
                group: "üçî È∫•Áï∂Âãû / ÈÄüÈ£ü / Â∞èÈ°ç",
                keywords: ["È∫•Áï∂Âãû", "ÈÄüÈ£ü"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞ÁÅ£Pay", rate: "3.8%", sortVal: 3.8,
                limit: "È∫•Áï∂ÂãûË´ãÊéÉÂè∞ÁÅ£Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üçî È∫•Áï∂Âãû / ÈÄüÈ£ü / Â∞èÈ°ç",
                keywords: ["È∫•Áï∂Âãû", "ÈÄüÈ£ü"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÊ®ÇÈ•óË≥º„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç° / Apple Pay", rate: "3%", sortVal: 3.0,
                limit: "Â∞èÈ°çÊîØ‰ªòÊúâÂõûÈ•ã",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üçî È∫•Áï∂Âãû / ÈÄüÈ£ü / Â∞èÈ°ç",
                keywords: ["È∫•Áï∂Âãû", "ÈÄüÈ£ü", "Â∞èÈ°ç", "ÊÇ†ÈÅäÂç°"],
                cardName: "Ê∞∏Ë±êÂ§ßÊà∂ (ÊÇ†ÈÅäÂç°)",
                scheme: null, schemeType: null,
                method: "ÊÇ†ÈÅäÂç°ÊÑüÊáâ", rate: "3%", sortVal: 2.9,
                limit: "‰∏äÈôê $100/Êúà",
                period: "Èï∑ÊúüÊúâÊïà"
            },

            // --- 6. ÈáèË≤©Ë∂ÖÂ∏Ç ---
            {
                group: "üõí ÈáèË≤© / Ë∂ÖÂ∏Ç / Â±ÖÂÆ∂",
                keywords: ["ÂÆ∂Ê®ÇÁ¶è", "lopia", "Â§ßË≤∑ÂÆ∂", "ÂîêÂêâËªªÂæ∑", "donki"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂ§©Â§©Âà∑„Äë", schemeType: "taishin",
                method: "Âè∞Êñ∞Pay / ÂØ¶È´îÂç°", rate: "3.3%", sortVal: 3.3,
                limit: "ÈáèË≤©Ë∂ÖÂ∏ÇÈ¶ñÈÅ∏",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üõí ÈáèË≤© / Ë∂ÖÂ∏Ç / Â±ÖÂÆ∂",
                keywords: ["ÂÆ∂Ê®ÇÁ¶è", "lopia", "ÂÖ®ËÅØ", "ikea", "ÂÆúÂÆ∂"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÈõÜÁ≤æÈÅ∏„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç° / PX Pay", rate: "2%", sortVal: 2.0,
                limit: "ÂÖ®ËÅØÈúÄÁ∂Å PX Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üõí ÈáèË≤© / Ë∂ÖÂ∏Ç / Â±ÖÂÆ∂",
                keywords: ["ikea", "ÂÆúÂÆ∂", "ÁâπÂäõÂ±ã", "hola", "ÂÆúÂæóÂà©", "net"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay", rate: "3.8%", sortVal: 3.8,
                limit: "IKEA/NET Áî®Âè∞Êñ∞PayÊúÄÈ´ò",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 7. ‰∫§ÈÄöÈÄöÂã§ ---
            {
                group: "üöÑ ‰∫§ÈÄö / ÈÄöÂã§ / Ë®àÁ®ãËªä",
                keywords: ["È´òÈêµ", "Âè∞Èêµ", "uber", "yoxi", "linego", "Ë®àÁ®ãËªä"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂ§©Â§©Âà∑„Äë", schemeType: "taishin",
                method: "Âà∑Âç° / Á∂ÅÂç°", rate: "3.3%", sortVal: 3.3,
                limit: "ÈÄöÂã§ÊóèÈ¶ñÈÅ∏",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üöÑ ‰∫§ÈÄö / ÈÄöÂã§ / Ë®àÁ®ãËªä",
                keywords: ["È´òÈêµ", "uber", "yoxi", "Ë®àÁ®ãËªä"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêË∂£ÊóÖË°å„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç° / ÂÆòÁ∂≤", rate: "3%", sortVal: 3.0,
                limit: "È´òÈêµÂ±¨Ë∂£ÊóÖË°å",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 8. ÁôæË≤®Ë≥ºÁâ© (Â∑≤‰øÆÊ≠£ NET Ë°ùÁ™ÅÂïèÈ°å) ---
            {
                group: "üõçÔ∏è ÁôæË≤® / Âø´ÊôÇÂ∞ö / Ë≥ºÁâ©",
                keywords: ["Êñ∞ÂÖâ‰∏âË∂ä", "net", "uniqlo", "zara", "Ë™†ÂìÅ"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay", rate: "3.8%", sortVal: 3.8,
                limit: "NETÊúçÈ£æ/Êñ∞ÂÖâ‰∏âË∂ä ÂÑ™ÂÖàÁî®Âè∞Êñ∞Pay",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üõçÔ∏è ÁôæË≤® / Âø´ÊôÇÂ∞ö / Ë≥ºÁâ©",
                keywords: ["Êñ∞ÂÖâ‰∏âË∂ä", "sogo", "ÈÅ†Êù±", "101", "Â∑®Âüé", "Êº¢Á•û", "Ë™†ÂìÅ", "uniqlo", "zara"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂ§ßÁ≠ÜÂà∑„Äë", schemeType: "taishin",
                method: "ÂØ¶È´îÂç°", rate: "3.3%", sortVal: 3.3,
                limit: "Ëã•‰∏çËÉΩÁî®Âè∞Êñ∞PayÔºåÂà∑ÂØ¶È´îÂç°",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üõçÔ∏è ÁôæË≤® / Âø´ÊôÇÂ∞ö / Ë≥ºÁâ©",
                keywords: ["Êñ∞ÂÖâ‰∏âË∂ä", "sogo", "ÈÅ†Êù±", "101", "Â∑®Âüé", "Êº¢Á•û", "Ë™†ÂìÅ", "outlet"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÊ®ÇÈ•óË≥º„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç°", rate: "3%", sortVal: 3.0,
                limit: "Ê≥®ÊÑèÔºöUNIQLO/ZARA ‰∏çÂõûÈ•ã",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 9. È§êÈ£≤ ---
            {
                group: "üçΩÔ∏è È§êÂª≥ / Â§ñÈÄÅ",
                keywords: ["È§êÂª≥", "ÂêÉÈ£Ø", "ÁéãÂìÅ", "ÊòüÂ∑¥ÂÖã", "Â§ñÈÄÅ", "uber eats", "foodpanda"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÂ•ΩÈ•óÂà∑„Äë", schemeType: "taishin",
                method: "ÂØ¶È´îÂç° / Âè∞Êñ∞Pay", rate: "3.3%", sortVal: 3.3,
                limit: "ÂÖ®Âè∞È§êÈ£≤ / Â§ñÈÄÅÈõôÈõÑ",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üçΩÔ∏è È§êÂª≥ / Â§ñÈÄÅ",
                keywords: ["Â§ñÈÄÅ", "uber eats", "foodpanda"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÊ®ÇÈ•óË≥º„Äë", schemeType: "cube",
                method: "Á∂ÅÂÆö App", rate: "3%", sortVal: 3.0,
                limit: "ÂÉÖÈôêÂ§ñÈÄÅÂπ≥Âè∞",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 10. Á∂≤Ë≥ºÈõªÂïÜ (Â∑≤Ë£ú‰∏ä YouTube/Netflix) ---
            {
                group: "üì± Á∂≤Ë≥º / ÈÅäÊà≤ / ÂΩ±Èü≥",
                keywords: ["Ëù¶ÁöÆ", "momo", "pchome", "Ê∑òÂØ∂", "ÈÖ∑Êæé", "ÈÅäÊà≤", "netflix", "steam", "youtube", "spotify"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêÊï∏Ë∂£Âà∑„Äë", schemeType: "taishin",
                method: "Âà∑Âç° / Á∂ÅÂç°", rate: "3.3%", sortVal: 3.3,
                limit: "Á∂≤Ë≥º/ÈÅäÊà≤/ÂΩ±Èü≥",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "üì± Á∂≤Ë≥º / ÈÅäÊà≤ / ÂΩ±Èü≥",
                keywords: ["Ëù¶ÁöÆ", "momo", "pchome", "Ê∑òÂØ∂", "ÈÖ∑Êæé", "netflix", "youtube", "spotify", "disney"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÁé©Êï∏‰Ωç„Äë", schemeType: "cube",
                method: "Áõ¥Êé•Âà∑Âç°", rate: "3%", sortVal: 3.0,
                limit: "Âê´ Youtube/Netflix/Spotify",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 11. Êµ∑Â§ñÊóÖÈÅä ---
            {
                group: "‚úàÔ∏è Êµ∑Â§ñ / Ê©üÁ•® / Ë®ÇÊàø",
                keywords: ["Êó•Êú¨", "ÈüìÂúã", "Êµ∑Â§ñ", "agoda", "klook", "Ê©üÁ•®", "daiso", "gs25"],
                cardName: "ÂåØË±êÊóÖ‰∫∫ÁÑ°Èôê",
                scheme: null, schemeType: null,
                method: "ÂØ¶È´îÂç°", rate: "10ÂÖÉ/Âì©", sortVal: 4.5,
                limit: "Êµ∑Â§ñÈ¶ñÈÅ∏ÔºåÂõûÈ•ãÁÑ°‰∏äÈôê",
                period: "Èï∑ÊúüÊúâÊïà"
            },
            {
                group: "‚úàÔ∏è Êµ∑Â§ñ / Ê©üÁ•® / Ë®ÇÊàø",
                keywords: ["Êó•Êú¨", "ÈüìÂúã", "Êµ∑Â§ñ", "daiso", "gs25", "emart24"],
                cardName: "Âè∞Êñ∞ Richart Âç°",
                scheme: "ÂàáÊèõ„ÄêPayËëóÂà∑„Äë", schemeType: "taishin",
                method: "Á∂ÅÂÆö Âè∞Êñ∞Pay+", rate: "3.8%", sortVal: 3.8,
                limit: "ÈúÄÁî® Âè∞Êñ∞Pay+ (Êµ∑Â§ñÂä†Á¢º)",
                period: "2026/1/1 ~ 2026/6/30"
            },
            {
                group: "‚úàÔ∏è Êµ∑Â§ñ / Ê©üÁ•® / Ë®ÇÊàø",
                keywords: ["Êó•Êú¨", "ÈüìÂúã", "Êµ∑Â§ñ", "agoda", "klook"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêË∂£ÊóÖË°å„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç°", rate: "3%", sortVal: 3.0,
                limit: "Êó•ÈüìÊ≥∞Êñ∞Á≠âÊåáÂÆöÂúãÂÆ∂",
                period: "2026/1/1 ~ 2026/6/30"
            },

            // --- 12. ÂÖúÂ∫ï ---
            {
                group: "üåü ‰∏ÄËà¨Ê∂àË≤ª (ÁÑ°ËÖ¶Âà∑)",
                keywords: ["default", "‰∏ÄËà¨", "ÊÇ†ÈÅäÂç°"],
                cardName: "ÂåØË±êÊóÖ‰∫∫ÁÑ°Èôê",
                scheme: null, schemeType: null,
                method: "ÂØ¶È´îÂç°", rate: "18ÂÖÉ/Âì©", sortVal: 2.5,
                limit: "ÂúãÂÖß‰∏ÄËà¨Ê∂àË≤ª",
                period: "Èï∑ÊúüÊúâÊïà"
            },
            {
                group: "üåü ‰∏ÄËà¨Ê∂àË≤ª (ÁÑ°ËÖ¶Âà∑)",
                keywords: ["default", "‰∏ÄËà¨"],
                cardName: "Ê∞∏Ë±êÂ§ßÊà∂",
                scheme: null, schemeType: null,
                method: "ÂØ¶È´îÂç°", rate: "2%", sortVal: 2.0,
                limit: "ÁèæÈáëÂõûÈ•ã (Â§ßÊà∂Á≠âÁ¥ö)",
                period: "Èï∑ÊúüÊúâÊïà"
            },
            {
                group: "üåü ‰∏ÄËà¨Ê∂àË≤ª (ÁÑ°ËÖ¶Âà∑)",
                keywords: ["default", "ÊÇ†ÈÅäÂç°", "ÁèæÈáë", "Â∞èÈ°ç"],
                cardName: "ÊÇ†ÈÅäÂç° / ÁèæÈáë",
                scheme: null, schemeType: null,
                method: "Âó∂Âç° / ‰ªòÁèæ", rate: "-", sortVal: 0,
                limit: "Ëã•Â∫óÂÆ∂‰∏çÊîØÊè¥‰ø°Áî®Âç°ÔºåË´ãÁî®ÊÇ†ÈÅäÂç°",
                period: "Èï∑ÊúüÊúâÊïà"
            },

            // --- 13. ÈôêÊôÇÊ¥ªÂãï (Â∫ïÈÉ®) ---
            {
                group: "üî• ÈôêÊôÇÊ¥ªÂãï / Â£ΩÊòü",
                keywords: ["Â§ßÊ∏ØÈñãÂî±", "ÁòãÂ§ßÊ∏Ø", "ÊãìÂÖÉ", "klook", "È´òÈõÑ‰ΩèÂÆø"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÁòãÂ§ßÊ∏Ø„Äë", schemeType: "cube",
                method: "ÂÆòÁ∂≤/ÁèæÂ†¥Âà∑Âç°", rate: "3.5%~10%", sortVal: 10.0,
                limit: "ÂîÆÁ•®/‰ΩèÂÆø/È´òÈêµ3.5%ÔºåÁèæÂ†¥Âë®ÈÇä10%",
                period: "2025/12/16 ~ 2026/3/23"
            },
            {
                group: "üî• ÈôêÊôÇÊ¥ªÂãï / Â£ΩÊòü",
                keywords: ["ÊÖ∂ÁîüÊúà", "Â£ΩÊòü", "Ê´ªÊ°ÉË∞∑", "ÂØåÁæéÊµ∑ÈÆÆ", "Èå¢Ê´É", "Â•ΩÊ®ÇËø™", "Â±ãË≥ÄÁà∫"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÊÖ∂ÁîüÊúà„Äë", schemeType: "cube",
                method: "ÂØ¶È´îÂç°", rate: "10%", sortVal: 9.5,
                limit: "Â£ΩÊòüÂ∞àÂ±¨ (ÂÆúËä±Êù±/KTV/ÊåáÂÆöÈ§êÈÖí)",
                period: "2026/1/1 ~ 2026/3/31"
            },
            {
                group: "üî• ÈôêÊôÇÊ¥ªÂãï / Â£ΩÊòü",
                keywords: ["Á´•Ê®ÇÂåØ", "Ë¶™Â≠ê", "10mois", "tiger family", "Êú±ÂÆóÊÖ∂"],
                cardName: "ÂúãÊ≥∞ CUBE Âç°",
                scheme: "ÂàáÊèõ„ÄêÁ´•Ê®ÇÂåØ„Äë", schemeType: "cube",
                method: "ÂÆòÁ∂≤/ÂØ¶È´î", rate: "5%~10%", sortVal: 9.0,
                limit: "ÈúÄÁ¨¶ÂêàË¶™Â≠êÂ∏≥Êà∂Ë≥áÊ†º",
                period: "2026/1/1 ~ 2026/6/30"
            }
        ];

        // -----------------------------------------------------------
        // Á®ãÂºèÈÇèËºØÂçÄ (Âê´Êô∫ÊÖßÊéíÂ∫è)
        // -----------------------------------------------------------
        const input = document.getElementById('search-input');
        const resultArea = document.getElementById('result-area');

        window.onload = () => renderAllGroups();

        input.addEventListener('input', (e) => {
            const query = e.target.value.toLowerCase().trim();
            if (!query) {
                renderAllGroups();
            } else {
                findBestCard(query);
            }
        });

        function renderAllGroups() {
            resultArea.innerHTML = "";
            const groups = [...new Set(rules.map(r => r.group))];

            groups.forEach(groupName => {
                const header = document.createElement('div');
                header.className = 'group-header';
                header.innerHTML = `<span>${groupName}</span>`;
                resultArea.appendChild(header);

                const groupRules = rules.filter(r => r.group === groupName);
                groupRules.sort((a, b) => b.sortVal - a.sortVal);

                groupRules.forEach(card => {
                    resultArea.innerHTML += createCardHtml(card);
                });
            });
        }

        function findBestCard(query) {
            resultArea.innerHTML = "";
            
            // Ê≠•È©ü 1: ÁØ©ÈÅ∏Âá∫ÊúâÂåÖÂê´ÈóúÈçµÂ≠óÁöÑÂç°Áâá
            let matches = rules.filter(rule => {
                return rule.keywords.some(k => query.includes(k) || k.includes(query));
            });

            if (matches.length === 0) {
                resultArea.innerHTML = `<div class="result-title">ü§î Ë≥áÊñôÂ∫´Êâæ‰∏çÂà∞ÔºåÂª∫Ë≠∞‰ΩøÁî®Ôºö</div>`;
                const defaults = rules.filter(r => r.keywords.includes("default"));
                defaults.forEach(card => resultArea.innerHTML += createCardHtml(card));
            } else {
                resultArea.innerHTML = `<div class="result-title">üîç "${input.value}" ÊêúÂ∞ãÁµêÊûúÔºö</div>`;
                
                // Ê≠•È©ü 2: Êô∫ÊÖßÊéíÂ∫è (Smart Sort)
                // ÂÑ™ÂÖàÂ∫¶Ôºö
                // 1. ÂÆåÂÖ®ÂåπÈÖçÊàñÈóúÈçµÂ≠óÈùûÂ∏∏Êé•Ëøë (‰æãÂ¶ÇËº∏ÂÖ• Netflix, ÈóúÈçµÂ≠óÊúâ Netflix)
                // 2. sortVal È´ò‰Ωé
                
                matches.sort((a, b) => {
                    // Ë®àÁÆó A ÁöÑÊúÄ‰Ω≥ÂåπÈÖçÂàÜÊï∏
                    const scoreA = getMatchScore(a.keywords, query);
                    const scoreB = getMatchScore(b.keywords, query);
                    
                    if (scoreA !== scoreB) {
                        return scoreB - scoreA; // ÂàÜÊï∏È´òÁöÑÊéíÂâçÈù¢
                    }
                    return b.sortVal - a.sortVal; // ÂàÜÊï∏‰∏ÄÊ®£ÔºåÊØîÂõûÈ•ãÁéá
                });

                matches.forEach((card, index) => {
                    resultArea.innerHTML += createCardHtml(card, index === 0);
                });
            }
        }

        // Ë®àÁÆóÂåπÈÖçÂàÜÊï∏ÁöÑÂáΩÂºè
        function getMatchScore(keywords, query) {
            let maxScore = 0;
            keywords.forEach(k => {
                let score = 0;
                if (k === query) score = 100; // ÂÆåÂÖ®‰∏ÄÊ®£
                else if (k.includes(query)) score = 80; // ÈóúÈçµÂ≠óÂåÖÂê´ÊêúÂ∞ãË©û (ÊêúÂ∞ã: net, ÈóúÈçµÂ≠ó: netflix)
                else if (query.includes(k)) {
                    // ÊêúÂ∞ãË©ûÂåÖÂê´ÈóúÈçµÂ≠ó (ÊêúÂ∞ã: netflix, ÈóúÈçµÂ≠ó: net) -> ÈÄôÁ®ÆÂ∞±ÊòØ NET Ë°£ÊúçÁöÑÂïèÈ°å
                    // Â¶ÇÊûúÈóúÈçµÂ≠óÂ§™Áü≠ÔºåÂàÜÊï∏Ë¶ÅÁµ¶‰Ωé‰∏ÄÈªûÔºåÈÅøÂÖçË™§Âà§
                    score = 50; 
                }
                if (score > maxScore) maxScore = score;
            });
            return maxScore;
        }

        function createCardHtml(card, highlight = false) {
            let schemeHtml = '';
            if (card.scheme) {
                const badgeClass = card.schemeType === 'cube' ? 'badge-scheme cube' : 'badge-scheme taishin';
                schemeHtml = `<span class="badge ${badgeClass}">${card.scheme}</span>`;
            }

            const extraClass = highlight ? 'best-match' : '';
            const keywordsText = card.keywords.join(", ");

            return `
                <div class="card ${extraClass}">
                    <div class="card-header">
                        <div class="card-name">${card.cardName}</div>
                        <div class="rate">${card.rate}</div>
                    </div>
                    
                    <div class="tags-row">
                        ${schemeHtml}
                        <span class="badge badge-method">üí≥ ${card.method}</span>
                    </div>

                    <div class="details">
                        <div class="detail-row">
                            <span class="icon">‚ö†Ô∏è</span>
                            <span class="limit-text">${card.limit}</span>
                        </div>
                        <div class="detail-row">
                            <span class="icon">üìÖ</span>
                            <span class="period-text">ÈÅ©Áî®Ôºö${card.period}</span>
                        </div>
                        <div class="keywords-preview">ÈóúÈçµÂ≠ó: ${keywordsText}</div>
                    </div>
                </div>
            `;
        }
    </script>
</body>
</html>
